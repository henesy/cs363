/*
This Commands Pane is for creating, editing, and executing batches of commands. To get started, use the [Open] button to load a batch of commands from the Demo folder. 

The Output Pane on the right is the default area where the output of a command is displayed. The pane is an html browser where text, html documents, and images can be displayed. Alternatively, in some cases the outputs can be saved to files or displayed in popup windows. 
*/


/*
Step 0. Create and Load Storage
*/
//$CyDB:> createStorage QuickStorageConfig.xml;
$CyDB:> loadStorage QuickStorageConfig.xml;

/*
Step 1. Dispaly configuration files
*/
$CyDB:> displayXML  .\cyutils\btree\workspace\BTreeConfigBulk2.xml;
$CyDB:> displayXML .\cyutils\btree\workspace\TupleConfigBulk2.xml;

/*
Step 2. Declare variables for btree and tuple configuration file names
*/
$CyDB:> declare string $$BTreeConfigBulk2 := .\cyutils\btree\workspace\BTreeConfigBulk2.xml;
$CyDB:> declare string $$TupleConfigBulk2 := .\cyutils\btree\workspace\TupleConfigBulk2.xml;
$CyDB:> declare string $$TuplesDataBulk2 := .\cyutils\btree\workspace\tuples_bulk2.txt;
$CyDB:> list variables;

/*
Step 3. Lookup for pageAccesses
 and list CyUtils commands
*/
$CyDB:> resetPageAccessRelativeCount;
$CyDB:> getPageAllocatedCount;
$CyDB:> getPageDeallocatedCount;
$CyUtils:> list commands;

/*
Step 3. Build an empty BTree, and show its root&sequence page Id
*/
$CyUtils:> BTreeCreateEmpty $$BTreeConfigBulk2 $$TupleConfigBulk2;
$CyUtils:> BTreeShowRootAndSequencePageId $$BTreeConfigBulk2;

/*
Step 4. Prepare sorted data for BTree
*/
$Cyutils:> BTreePrepareSortedData $$TupleConfigBulk2 $$TuplesDataBulk2;

/*
Step 5. BulkLoad auto generated sorted data into btree
, and show page ids
*/
$CyUtils:> BTreeBulkLoad $$BTreeConfigBulk2 $$TupleConfigBulk2 $$TuplesDataBulk2;
$CyUtils:> BTreeShowRootAndSequencePageId $$BTreeConfigBulk2;
/*
$CyUtils:> BTreeSequenceScan $$BTreeConfigBulk2 $$TupleConfigBulk2;
*/


/*
Step 6. Show directory
*/
$CyDB:> showdirectory;

/*
Step 7. Lookup for pageAccesses
*/
$CyDB:> getPageAllocatedCount;
$CyDB:> getPageDeallocatedCount;
